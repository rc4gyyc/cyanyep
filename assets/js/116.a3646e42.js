(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{488:function(t,n,s){"use strict";s.r(n);var a=s(1),_=Object(a.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("ul",[n("li",[n("p",[t._v("有些网站需要验证码通过后方可进入网页,目的很简单,就是区分是自然人访问还是计算机程序访问。")])]),t._v(" "),n("li",[n("p",[t._v("验证码：简称为captcha")]),t._v(" "),n("ul",[n("li",[t._v("一种随机生成的信息（数字、字母、汉字、图片、算术题、问答题）或者系统发送到客户终端的信息，为了防止恶意的请求行为，增加应用程序的安全性。")]),t._v(" "),n("li",[t._v("防止恶意攻击、盗取信息。")])])]),t._v(" "),n("li",[n("p",[t._v("验证码种类：")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("1)纯数字（有些需要计算）")])]),t._v(" "),n("li",[n("p",[t._v("2)纯英文（可能区分大小写）")])]),t._v(" "),n("li",[n("p",[t._v("3)英数混合（可能有干扰背景）")])]),t._v(" "),n("li",[n("p",[t._v("4)汉字")])]),t._v(" "),n("li",[n("p",[t._v("5)滑动")])]),t._v(" "),n("li",[n("p",[t._v("6)点选（选字、选物）")])]),t._v(" "),n("li",[n("p",[t._v("7)问答题")])]),t._v(" "),n("li",[n("p",[t._v("8)点选（语序选择）")])]),t._v(" "),n("li",[n("p",[t._v("9)空间推理")])]),t._v(" "),n("li",[n("p",[t._v("10)无感知")])]),t._v(" "),n("li",[n("p",[t._v("11)手机验证码")])]),t._v(" "),n("li",[n("p",[t._v("12)语音验证码")])]),t._v(" "),n("li",[n("p",[t._v("13)视频验证码")])])])]),t._v(" "),n("li",[n("p",[t._v("验证码测试难点：")]),t._v(" "),n("ul",[n("li",[t._v("Selenium自动化测试与验证码设计初衷是矛盾的：\n"),n("ul",[n("li",[t._v("Selenium自动化测试：用程序代替人工操作")]),t._v(" "),n("li",[t._v("验证码存在的意义：让自然人能操作，程序不能操作。")])])]),t._v(" "),n("li",[t._v("Selenium测试处理验证码的原因：\n"),n("ul",[n("li",[t._v("在Web应用中，大部分系统在用户登录注册的时候都要求输入验证码，而在设计自动化测试脚本时，就需要临时处理验证码的问题，否则无法继续执行后续测试。")]),t._v(" "),n("li",[t._v("在Selenium中并没有对验证码处理的方法。")])])])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("验证码的常用处理方式")]),t._v("：")]),t._v(" "),n("ul",[n("li",[t._v("通过配置"),n("strong",[t._v("去掉验证码")]),t._v("（测试环境下-采用）\n"),n("ul",[n("li",[t._v("开发来提供配置，如配置文件、界面配置、修改数据库等，建议使用。")])])]),t._v(" "),n("li",[t._v("设置"),n("strong",[t._v("万能验证码")]),t._v("（生产环境和测试环境下-采用)\n"),n("ul",[n("li",[t._v("开发来提供万能验证码，生产和测试环境下采用，必须注意保密，建议使用。")])])]),t._v(" "),n("li",[n("strong",[t._v("验证码识别技术")]),t._v("（通过编程语言库，识别率很难达到100%）\n"),n("ul",[n("li",[t._v("OCR技术：成功率不高，验证码种类繁多，开发成本高，不太建议！")])])]),t._v(" "),n("li",[n("strong",[t._v("记录cookie")]),t._v("(通过添加cookie:来跳过登录)")])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("验证码测试策略：")])]),t._v(" "),n("ul",[n("li",[t._v("测试登录功能时，验证码测试策略：\n"),n("ul",[n("li",[n("strong",[t._v("去掉验证码")]),t._v("（测试环境）、设置万能验证码（生产环境和测试环境）来进行自动化测试。")]),t._v(" "),n("li",[t._v("验证码部分采用"),n("strong",[t._v("手工测试")]),t._v("方式进行测试。")])])]),t._v(" "),n("li",[t._v("不需要测试登录功能时，验证码测试策略：\n"),n("ul",[n("li",[n("strong",[t._v("记录cookie进行跳过登录")]),t._v("。")])])])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("ddddocr识别验证码：")])]),t._v(" "),n("ul",[n("li",[t._v("ddddocr是由sml2h3开发的专为验证码厂商进行对自家新版本验证码难易强度进行验证的一个python库。\n"),n("ul",[n("li",[t._v("1、安装："),n("strong",[t._v("请在pycharm解释器里安装")])]),t._v(" "),n("li",[t._v("2、导入ddddocr："),n("code",[t._v("import ddddocr")])]),t._v(" "),n("li",[t._v("3、定位识别图片元素："),n("code",[t._v('img=driver.find_element(By.....,"..")')])]),t._v(" "),n("li",[t._v("4、将图片元素截图："),n("code",[t._v("img.screenshot('check.png')")])]),t._v(" "),n("li",[t._v("5、读图片文件的二进制：img_bytes=open('check.png','rb').read()")]),t._v(" "),n("li",[t._v("6、创建ocr对象：ocr=ddddocr.DdddOcr()")]),t._v(" "),n("li",[t._v("7、识别验证码：check_code=ocr.classification(img_bytes)")])])])])])]),t._v(" "),n("div",{staticClass:"language-python extra-class"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("filename"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("os"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getcwd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"check.png"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#获取当前目录的绝对路径保存图片")]),t._v("\nele"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("screenshot"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nimg_bin"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rb"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("read"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nocr"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ddddocr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DdddOcr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ncheckcode"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ocr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classification"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img_bin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#识别验证码")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("checkcode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#输出验证码")]),t._v("\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"captcha"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_keys"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("checkcode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndriver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("XPATH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//input[@value:=\"进入管理中心\"]'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("click"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("ul",[n("li",[t._v("小结\n"),n("ul",[n("li",[t._v("验证码的常用处理方式\n"),n("ul",[n("li",[t._v("去掉验证码")]),t._v(" "),n("li",[t._v("设置万能验证码")]),t._v(" "),n("li",[t._v("验证码识别技术OCR")]),t._v(" "),n("li",[t._v("记录cookie跳过登录的验证码")])])]),t._v(" "),n("li",[t._v("ddddocr识别验证码\n"),n("ul",[n("li",[t._v("导入ddddocr："),n("code",[t._v("import ddddocr")])]),t._v(" "),n("li",[t._v("定位识别图片元素："),n("code",[t._v('img=driver.find_element(By.....,"..")')])]),t._v(" "),n("li",[t._v("将图片元素截图："),n("code",[t._v("img.screenshot('check.png')")])]),t._v(" "),n("li",[t._v("读图片文件的二进制：img_bytes=open('check.png','rb').read()")]),t._v(" "),n("li",[t._v("创建ocr对象：ocr=ddddocr.DdddOcr()")]),t._v(" "),n("li",[t._v("识别验证码：check_code=ocr.classification(img_bytes)")])])])])])])])}),[],!1,null,null,null);n.default=_.exports}}]);