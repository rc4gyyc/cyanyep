(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{320:function(t,e,r){"use strict";var a=TypeError;t.exports=function(t,e){if(t<e)throw new a("Not enough arguments");return t}},348:function(t,e,r){"use strict";var a=r(45),n=r(6),i=r(126),s=r(320),o=URLSearchParams,l=o.prototype,c=n(l.append),d=n(l.delete),u=n(l.forEach),v=n([].push),p=new o("a=1&a=2&b=3");p.delete("a",1),p.delete("b",void 0),p+""!="a=2"&&a(l,"delete",(function(t){var e=arguments.length,r=e<2?void 0:arguments[1];if(e&&void 0===r)return d(this,t);var a=[];u(this,(function(t,e){v(a,{key:e,value:t})})),s(e,1);for(var n,o=i(t),l=i(r),p=0,h=0,f=!1,x=a.length;p<x;)n=a[p++],f||n.key===o?(f=!0,d(this,n.key)):h++;for(;h<x;)(n=a[h++]).key===o&&n.value===l||c(this,n.key,n.value)}),{enumerable:!0,unsafe:!0})},349:function(t,e,r){"use strict";var a=r(45),n=r(6),i=r(126),s=r(320),o=URLSearchParams,l=o.prototype,c=n(l.getAll),d=n(l.has),u=new o("a=1");!u.has("a",2)&&u.has("a",void 0)||a(l,"has",(function(t){var e=arguments.length,r=e<2?void 0:arguments[1];if(e&&void 0===r)return d(this,t);var a=c(this,t);s(e,1);for(var n=i(r),o=0;o<a.length;)if(a[o++]===n)return!0;return!1}),{enumerable:!0,unsafe:!0})},350:function(t,e,r){"use strict";var a=r(7),n=r(6),i=r(127),s=URLSearchParams.prototype,o=n(s.forEach);a&&!("size"in s)&&i(s,"size",{get:function(){var t=0;return o(this,(function(){t++})),t},configurable:!0,enumerable:!0})},374:function(t,e,r){},399:function(t,e,r){"use strict";r(374)},407:function(t,e,r){"use strict";r.r(e);r(129),r(8),r(16),r(21),r(348),r(349),r(350);var a={name:"SubtitleExtractor",data:()=>({jsonInput:"",extractedText:"",error:"",isCopied:!1,isDragOver:!1}),computed:{lineCount(){return this.extractedText?this.extractedText.split("\n").length:0}},methods:{dragOver(){this.isDragOver=!0},dragLeave(){this.isDragOver=!1},dropFile(t){var e;this.isDragOver=!1;const r=null===(e=t.dataTransfer)||void 0===e?void 0:e.files;r&&r.length>0&&this.readFile(r[0])},handleFileSelect(t){const e=t.target;e.files&&e.files.length>0&&this.readFile(e.files[0])},readFile(t){if(!t.name.endsWith(".json"))return void(this.error="请选择JSON文件");const e=new FileReader;e.onload=t=>{try{var e;const r=null===(e=t.target)||void 0===e?void 0:e.result;this.jsonInput=r,this.error=""}catch(t){this.error="读取文件错误: "+t.message}},e.onerror=()=>{this.error="读取文件失败"},e.readAsText(t)},extractText(){try{this.error="";const t=JSON.parse(this.jsonInput);if(!Array.isArray(t))throw new Error("JSON 数据必须是数组格式");this.extractedText=t.map(t=>t.content||"").filter(Boolean).join("\n")}catch(t){this.error="解析错误: "+t.message,console.error(t)}},downloadTxt(){const t=new Blob([this.extractedText],{type:"text/plain"}),e=URL.createObjectURL(t),r=document.createElement("a");r.href=e,r.download=`b站字幕_${(new Date).toISOString().slice(0,10)}.txt`,document.body.appendChild(r),r.click(),setTimeout(()=>{document.body.removeChild(r),URL.revokeObjectURL(e)},100)},async copyText(){try{await navigator.clipboard.writeText(this.extractedText),this.isCopied=!0,setTimeout(()=>{this.isCopied=!1},2e3)}catch(t){alert("复制失败，请手动选择文本复制"),console.error("复制错误:",t)}},removeNewlines(){this.extractedText&&(this.extractedText=this.extractedText.split("\n").map(t=>t.trim()).filter(t=>t.length>0).join("，"))},clearAll(){this.jsonInput="",this.extractedText="",this.error="",this.isCopied=!1}}},n=(r(399),r(1)),i=Object(n.a)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"subtitle-extractor"},[e("h1",[t._v("B站字幕提取工具（开发中）")]),t._v(" "),e("div",{staticClass:"drop-zone",class:{"drag-active":t.isDragOver},on:{dragover:function(e){return e.preventDefault(),t.dragOver.apply(null,arguments)},dragleave:t.dragLeave,drop:function(e){return e.preventDefault(),t.dropFile.apply(null,arguments)}}},[e("p",[t._v("将JSON文件拖放到此处，或")]),t._v(" "),e("label",{staticClass:"file-input-label",attrs:{for:"file-input"}},[t._v("选择文件")]),t._v(" "),e("input",{staticStyle:{display:"none"},attrs:{id:"file-input",type:"file",accept:".json,application/json"},on:{change:t.handleFileSelect}})]),t._v(" "),e("div",{staticClass:"input-section"},[e("label",{attrs:{for:"json-input"}},[t._v("或直接粘贴JSON数据：")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.jsonInput,expression:"jsonInput"}],attrs:{id:"json-input",placeholder:'例如：[{"from":0.18,"content":"今天就是我给大家..."}, {...}]'},domProps:{value:t.jsonInput},on:{input:function(e){e.target.composing||(t.jsonInput=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"controls"},[e("button",{attrs:{disabled:!t.jsonInput},on:{click:t.extractText}},[t._v("提取文本")]),t._v(" "),e("button",{attrs:{disabled:!t.extractedText},on:{click:t.removeNewlines}},[t._v("去除换行符")]),t._v(" "),e("button",{attrs:{disabled:!t.extractedText||t.isCopied},on:{click:t.copyText}},[t._v("\n      "+t._s(t.isCopied?"已复制":"复制文本")+"\n    ")]),t._v(" "),e("button",{attrs:{disabled:!t.extractedText},on:{click:t.downloadTxt}},[t._v("下载TXT")]),t._v(" "),e("button",{on:{click:t.clearAll}},[t._v("清空全部")])]),t._v(" "),e("div",{staticClass:"output-section"},[e("label",[t._v("提取结果（共 "+t._s(t.lineCount)+" 行）：")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.extractedText,expression:"extractedText"}],attrs:{readonly:"",placeholder:"提取结果将显示在这里..."},domProps:{value:t.extractedText},on:{input:function(e){e.target.composing||(t.extractedText=e.target.value)}}})]),t._v(" "),t.error?e("div",{staticClass:"error-message"},[t._v("\n    "+t._s(t.error)+"\n  ")]):t._e()])}),[],!1,null,"02c5d7f4",null).exports,s={__name:"2.B站字幕提取",setup:t=>({__sfc:!0,Subtitles:i})},o=Object(n.a)(s,(function(){var t=this._self._c,e=this._self._setupProxy;return t("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[t(e.Subtitles)],1)}),[],!1,null,null,null);e.default=o.exports}}]);